# yaml-language-server: $schema=config.schema.yaml
command_alias_start_index: 200
keybindings:
  root_table: M-Space
  prefix_table: Space
title:
  style: align=centre,bold
  prefix: ""
  prefix_style: ""
position:
  x: R
  y: P
custom_variables:
  - name: log_info
    value: "#[fg=green,italics] [info]#[default]#[italics]"
macros:
  - name: restart-pane
    commands:
      - display "#{log_info} Restarting pane"
      - "respawnp -k -c #{pane_current_path}"
items:
  - name: Run
    key: space
    command: command-prompt
  - name: Last window
    key: tab
    command: last-window
  - name: Last pane
    key: "`"
    command: last-pane
  - separator: true
  - name: +Windows
    key: w
    menu:
      - name: Last
        key: tab
        command: last-window
      - name: Choose
        key: w
        command: choose-tree -Zw
      - name: Previous
        key: p
        command: previous-window
      - name: Next
        key: n
        command: "run-shell $XDG_CONFIG_HOME/tmux/scripts/next_window.sh" 
      - name: New
        key: c
        command: neww -c "$HOME"
      - name: Copy
        key: C
        command: copy-window 
      - separator: true
      - name: Rename
        key: R
        command: command-prompt -I "#W" "renamew -- \"%%\""
      - name: Kill
        key: q
        command: 'confirm -p "Kill window #W? (y/n)" killw'
  - name: +Panes
    key: p
    menu:
      - name: Last
        key: tab
        command: lastp
      - name: Choose
        key: p
        command: displayp -d 0
      - separator: true
      - name: Left
        key: h
        command: selectp -L
      - name: Down
        key: j
        command: selectp -D
      - name: Up
        key: k
        command: selectp -U
      - name: Right
        key: l
        command: selectp -R
      - separator: true
      - name: Zoom
        key: z
        command: resizep -Z
      - name: +Resize
        key: r
        menu:
          - name: Left
            key: h
            command: resizep -L
            transient: true
          - name: Down
            key: j
            command: resizep -D
            transient: true
          - name: Up
            key: k
            command: resizep -U
            transient: true
          - name: Right
            key: l
            command: resizep -R
            transient: true
          - name: Left more
            key: H
            command: resizep -L 10
            transient: true
          - name: Down more
            key: J
            command: resizep -D 10
            transient: true
          - name: Up more
            key: K
            command: resizep -U 10
            transient: true
          - name: Right more
            key: L
            command: resizep -R 10
            transient: true
      - name: Swap left
        key: H
        command: swapp -t "{left-of}"
      - name: Swap down
        key: J
        command: swapp -t "{down-of}"
      - name: Swap up
        key: K
        command: swapp -t "{up-of}"
      - name: Swap right
        key: L
        command: swapp -t "{right-of}"
      - name: Break
        key: "!"
        command: break-pane
      - separator: true
      - name: Mark
        key: m
        command: selectp -m
      - name: Unmark
        key: M
        command: selectp -M
      - name: Capture
        key: C
        command: capture-pane
      - name: Respawn pane
        key: R
        macro: restart-pane
      - name: Kill
        key: q
        command: 'confirm -p "Kill pane #P? (y/n)" killp'
  - name: +Layout
    key: l
    menu:
      - name: Next
        key: n
        command: nextl
        transient: true
      - name: Spread evenly
        key: "="
        command: selectl tiled
      - name: Horizontal
        key: h
        command: selectl even-horizontal
      - name: Vertical
        key: v
        command: selectl even-vertical
      - name: Split horizontal
        key: "|"
        command: "splitw -h -c #{pane_current_path}"
      - name: Split vertical
        key: "-"
        command: "splitw -v -l 35% -c #{pane_current_path}"
      - name: Split copy
        key: c
        command: split-copy
      - name: Rotate
        key: o
        command: rotatew
        transient: true
      - name: Rotate reverse
        key: O
        command: rotatew -D
        transient: true
  - name: +Git
    key: g
    menu:
      - name: Lazygit
        key: g
        command:
          run-shell -b "$XDG_CONFIG_HOME/tmux/scripts/open_lazygit.sh &>/dev/null"
      - name: Files
        key: f
        command:
          run-shell -b "type=files $XDG_CONFIG_HOME/fzf/tmux-fzf-git.sh" 
      - name: Commits
        key: h
        command:
          run-shell -b "type=hashes $XDG_CONFIG_HOME/fzf/tmux-fzf-git.sh"
      - name: Branches
        key: b
        command:
          run-shell -b "type=branches $XDG_CONFIG_HOME/fzf/tmux-fzf-git.sh"
      - name: Remotes
        key: r
        command:
          run-shell -b "type=remotes $XDG_CONFIG_HOME/fzf/tmux-fzf-git.sh"
      - name: Log
        key: l
        command:
          run-shell -b "type=lreflogs $XDG_CONFIG_HOME/fzf/tmux-fzf-git.sh"
      - name: Each ref
        key: e
        command:
          run-shell -b "type=each_ref $XDG_CONFIG_HOME/fzf/tmux-fzf-git.sh"
      - name: Tags
        key: t
        command:
          run-shell -b "type=tags $XDG_CONFIG_HOME/fzf/tmux-fzf-git.sh"
      - name: Stash
        key: s
        command:
          run-shell -b "type=stashes $XDG_CONFIG_HOME/fzf/tmux-fzf-git.sh"
      - name: Worktree
        key: w
        command:
          run-shell -b "type=worktrees $XDG_CONFIG_HOME/fzf/tmux-fzf-git.sh"
  - name: +Buffers
    key: b
    menu:
      - name: Choose
        key: b
        command: choose-buffer -Z
      - name: List
        key: l
        command: lsb
      - name: Paste
        key: p
        command: pasteb
      - name: Save to clipboard
        key: c
        command: run-shell "tmux show-buffer | pbcopy"
      - name: Load from clipboard
        key: v
        command: run-shell "pbpaste | tmux load-buffer -"
  - name: +Sessions
    key: s
    menu:
      - name: Choose
        key: s
        command: choose-tree -Zs
      - name: New
        key: N
        command: new
      - name: Rename
        key: r
        command: rename
      - separator: true
      - name: Store
        key: S
        command: "run-shell $XDG_CONFIG_HOME/tmux/scripts/store_sessions.sh"
      - name: Restore
        key: R
        command: "run-shell $XDG_CONFIG_HOME/tmux/plugins/tmux-resurrect/scripts/save.sh"
  - name: +Client
    key: c
    menu:
      - name: Choose
        key: c
        command: choose-client -Z
      - name: Last
        key: l
        command: switchc -l
      - name: Previous
        key: p
        command: switchc -p
      - name: Next
        key: n
        command: switchc -n
      - separator: true
      - name: Refresh
        key: R
        command: refresh
      - name: +Plugins
        key: P
        menu:
          - name: Install
            key: i
            command:
              run-shell $TMUX_PLUGIN_MANAGER_PATH/tpm/bindings/install_plugins
          - name: Update
            key: u
            command:
              run-shell $TMUX_PLUGIN_MANAGER_PATH/tpm/bindings/update_plugins
          - name: Clean
            key: c
            command:
              run-shell $TMUX_PLUGIN_MANAGER_PATH/tpm/bindings/clean_plugins
      - name: Detach
        key: d
        command: detach
      - name: Suspend
        key: z
        command: suspendc
      - separator: true
      - name: Reload config
        key: r
        command: ER
      - name: Edit config
        key: e
        command: edit-config
      - name: Customize
        key: ","
        command: customize-mode -Z
  - separator: true
  - name: +Help
    key: h
    menu:
      - name: Keys
        key: k
        command: list-keys -N
      - name: Commands
        key: c
        command: list-commands
      - name: Tmux manual
        key: h
        command: tmux-man 
      - name: Man page
        key: m
        command: man
        separator: true
      - name: Messages
        key: m
        command: show-messages
      - name: Options
        key: o
        command: show-options -g
      - name: Window options
        key: w
        command: show-window-options -g
      - name: Environment
        key: e
        command: show-environment
