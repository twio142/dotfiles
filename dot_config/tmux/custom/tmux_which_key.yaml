# yaml-language-server: $schema=config.schema.yaml
command_alias_start_index: 200
keybindings:
  root_table: M-Space
  prefix_table: Space
title:
  style: align=centre,bold
  prefix: ""
  prefix_style: ""
position:
  x: R
  y: P
custom_variables:
  - name: log_info
    value: "#[fg=green,italics] [info]#[default]#[italics]"
macros:
  - name: test
    commands:
      - display "#{pane_current_path}"
      - send-keys Enter
items:
  - name: Run
    key: ":"
    command: command-prompt -p "❯" -T command
  - name: Last window
    key: tab
    command: last
  - name: Last pane
    key: "`"
    command: lastp
  - separator: true
  - name: +Windows
    key: w
    menu:
      - name: Last
        key: tab
        command: last
      # - name: Choose
      #   key: w
      #   command: choose-tree -Zw
      - name: List
        key: w
        command: run -b "$TMUX_PLUGIN_MANAGER_PATH/tmux-fzf/scripts/window.sh || true"
      - name: Next
        key: n
        command: if -F "#{>:#{session_windows},1}" next "neww -c '$HOME'"
      - name: Previous
        key: p
        command: previous
      - name: Create
        key: c
        command: neww -c "$HOME"
      - name: Create …
        key: C
        command: command-prompt -p "❯" -T command "neww \"%%\""
      - name: Move left
        key: h
        command: run "tmux movew -b -t $(( $(tmux display -p \#I) - 1 ))"
        transient: true
      - name: Move right
        key: l
        command: run "tmux movew -a -t $(( $(tmux display -p \#I) + 1 ))"
        transient: true
      - name: Sync panes
        key: s
        command: setw synchronize-panes
      - separator: true
      - name: Rename
        key: r
        command: command-prompt -p "Rename window:" -I "#W" "renamew -- \"%%\""
      - name: Kill
        key: q
        command: 'confirm -p "Kill window #W? (y/n)" unlink-window -k'
      - name: Kill others
        key: Q
        command: 'confirm -p "Kill other windows? (y/n)" killw -a'
  - name: +Panes
    key: p
    menu:
      - name: Last
        key: tab
        command: lastp
      - name: List
        key: p
        command: run -b "$TMUX_PLUGIN_MANAGER_PATH/tmux-fzf/scripts/pane.sh || true"
      - name: Jump
        key: j
        command: displayp -d 0
      - name: Zoom
        key: z
        command: resizep -Z
      - separator: true
      - name: Mark
        key: m
        command: selectp -m
      - name: Toggle sync
        key: s
        command: set -p synchronize-panes
      - name: Kill
        key: q
        command: 'confirm -p "Kill pane #P? (y/n)" killp'
      - name: Break
        key: b
        command: breakp
      - name: Respawn
        key: R
        command: run $XDG_CONFIG_HOME/tmux/scripts/restart-pane.sh
  - name: +Layout
    key: l
    menu:
      - name: Switch layout
        key: \\
        command: nextl
        transient: true
      - name: Spread evenly
        key: "="
        command: selectl -E
      - name: +Resize
        key: r
        menu:
          - name: Resize left
            key: h
            command: resizep -L 8
            transient: true
          - name: Resize down
            key: j
            command: resizep -D 8
            transient: true
          - name: Resize up
            key: k
            command: resizep -U 8
            transient: true
          - name: Resize right
            key: l
            command: resizep -R 8
            transient: true
      - separator: true
      - name: Split
        key: "-"
        command: "splitw -v -l 35% -c #{pane_current_path}"
      - name: Vsplit
        key: "|"
        command: "splitw -h -c #{pane_current_path}"
      - separator: true
      - name: Rotate
        key: o
        command: rotatew
        transient: true
      - name: Swap left
        key: h
        command: swapp -t "{left-of}"
      - name: Swap down
        key: j
        command: swapp -t "{down-of}"
      - name: Swap up
        key: k
        command: swapp -t "{up-of}"
      - name: Swap right
        key: l
        command: swapp -t "{right-of}"
  - name: +Buffers
    key: b
    menu:
      # - name: Choose
      #   key: b
      #   command: choose-buffer -Z
      - name: List
        key: b
        command: run -b "$TMUX_PLUGIN_MANAGER_PATH/tmux-fzf/scripts/buffer.sh || true"
      - name: Jump
        key: j
        command: run -b "#{@fingers-cli} start \\#{pane_id}"
      - name: Extract words
        key: w
        command: run "$TMUX_PLUGIN_MANAGER_PATH/extrakto/scripts/open.sh \\#{pane_id} word"
      - name: Extract lines
        key: l
        command: run "$TMUX_PLUGIN_MANAGER_PATH/extrakto/scripts/open.sh \\#{pane_id} line-trim"
      - name: Extract urls
        key: u
        command: run "$TMUX_PLUGIN_MANAGER_PATH/extrakto/scripts/open.sh \\#{pane_id} url"
      - separator: true
      - name: Copy to clipboard
        key: c
        command: run "tmux show-buffer | pbcopy"
      - name: Load from clipboard
        key: v
        command: run "pbpaste | tmux load-buffer -"
      - name: "Turn system clipboard #{?#{==:#{set-clipboard},on},OFF,ON}"
        key: s
        command: toggle-clipboard
  - name: +Sessions
    key: s
    menu:
      - name: Last
        key: tab
        command: switchc -l
      # - name: Choose
      #   key: s
      #   command: choose-tree -Zs
      - name: List
        key: s
        command: run -b "$TMUX_PLUGIN_MANAGER_PATH/tmux-fzf/scripts/session.sh || true"
      - name: Next
        key: n
        command: switchc -n
      - name: Previous
        key: p
        command: switchc -p
      - name: Create
        key: c
        command: new
      - name: Rename
        key: r
        command: command-prompt -p "Rename session:" -I "#S" "rename -- \"%%\""
      - separator: true
      - name: Suspend
        key: z
        command: suspendc
      - name: Kill others
        key: Q
        command: 'confirm -p "Kill other sessions? (y/n)" kill-session -a'
      - name: Detach
        key: d
        command: detach
      - name: Detach others
        key: D
        command: detach -a
  - name: +App
    key: a
    menu:
      - name: Commands
        key: "/"
        command: run -b "$TMUX_PLUGIN_MANAGER_PATH/tmux-fzf/scripts/menu.sh || true"
      - name: Alfred
        key: f
        command: alfred
      - name: Popup terminal
        key: t
        command: popup-term
      - name: Yazi
        key: y
        command: yazi
      - name: Btop
        key: b
        command: btop
      - name: Lazygit
        key: g
        command: lzg
      - name: Lazydocker
        key: d
        command: lzd
      - name: New Memo
        key: m
        command: memo new
      - name: List memos
        key: M
        command: memo
      - separator: true
      - name: Reload config
        key: r
        command: ER
      - name: Edit config
        key: e
        command: EF
      - name: +Plugins
        key: p
        menu:
          - name: Install
            key: i
            command: run $TMUX_PLUGIN_MANAGER_PATH/tpm/scripts/install_plugins.sh
          - name: Update
            key: u
            command: run "$TMUX_PLUGIN_MANAGER_PATH/tpm/scripts/update_plugin_prompt_handler.sh all"
          - name: Clean
            key: x
            command: run $TMUX_PLUGIN_MANAGER_PATH/tpm/bindings/clean_plugins
      - separator: true
      - name: Store sessions
        key: S
        command: run $XDG_CONFIG_HOME/tmux/scripts/store-sessions.sh
      - name: Restore sessions
        key: R
        command: run $TMUX_PLUGIN_MANAGER_PATH/tmux-resurrect/scripts/restore.sh
  - separator: true
  - name: +Help
    key: h
    menu:
      - name: Keys
        key: k
        command: lsk -N
      - name: Commands
        key: c
        command: lscm
      - name: Tmux manual
        key: t
        command: man tmux
      - name: Man page
        key: h
        command: command-prompt -p man "man %%"
      - separator: true
      - name: Messages
        key: m
        command: showmsgs
      - name: Options
        key: o
        command: show
      - name: Global options
        key: O
        command: show -g
      - name: Window options
        key: w
        command: show -gw
      - name: Environment
        key: e
        command: showenv
      - name: Global environment
        key: E
        command: showenv -g
