#compdef ssh

_ssh() {
  local config_file="$HOME/.ssh/config"
  if [[ -f "$config_file" ]]; then
    # Extract hosts from the config file
    local hosts
    hosts=($(grep "^Host " "$config_file" | awk '{print $2}' | grep -v '^[*]'))
    _arguments '1: :->hosts'
    if [[ $state == hosts ]]; then
      _values 'hosts' $hosts
    fi
  fi
}
